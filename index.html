<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Angle Ball ⚾ — Geometry at the Ballpark</title>
  <style>
    :root{
      --ink:#f8fafc; --muted:#a3b1c6; --accent:#22d3ee; --grass:#0f8a2c; --dirt:#8b5e34;
      --panel:#0b1324; --line:#e5e7eb; --chalk:#e2e8f0; --sky1:#0ea5e9; --sky2:#0f172a;
      --hl:#93c5fd;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color:var(--ink); background:
        radial-gradient(1200px 600px at 50% -250px, var(--sky1), transparent 65%),
        linear-gradient(180deg, var(--sky2) 0%, #0b1224 55%, #08111e 100%);
      overflow-x:hidden;
    }
    .stadium{position:fixed; inset:0; z-index:-1; pointer-events:none}
    .outfield{position:absolute; left:50%; transform:translateX(-50%); bottom:-120px; width:1600px; height:700px;
      background:
       radial-gradient(closest-side at 50% 88%, #0c6f25 0%, #0f8a2c 60%, #0a6a22 100%),
       repeating-conic-gradient(from 0deg, rgba(255,255,255,.04) 0deg 10deg, rgba(255,255,255,0) 10deg 20deg);
      border-top-left-radius:70px; border-top-right-radius:70px; filter:drop-shadow(0 -30px 120px rgba(0,0,0,.5));
    }
    .bleachers{position:absolute; left:50%; transform:translateX(-50%); bottom:360px; width:1400px; height:180px;
      background:linear-gradient(180deg,#0c1a35,#08122a); border:1px solid #142a55; border-top-left-radius:50px; border-top-right-radius:50px;
      box-shadow:0 -20px 80px rgba(0,0,0,.55) inset, 0 20px 80px rgba(0,0,0,.35);
    }
    .lights{position:absolute; left:50%; transform:translateX(-50%); bottom:560px; display:flex; gap:420px}
    .tower{width:120px; height:18px; background:linear-gradient(180deg,#e2e8f0,#94a3b8); border-radius:10px; box-shadow:0 0 40px #e2e8f0}
    .wrap{max-width:1100px; margin:0 auto; padding:20px}
    header{display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap}
    h1{margin:0; font-size:clamp(22px,3.2vw,34px); color:#e2f3ff; text-shadow:0 2px 0 #06223f}
    .sub{opacity:.85; font-size:14px}
    .board{display:grid; grid-template-columns:1.2fr .8fr; gap:16px; margin-top:14px}
    @media (max-width:960px){ .board{grid-template-columns:1fr} }
    .card{background:rgba(10,20,40,.75); border:1px solid #183154; border-radius:18px; padding:14px; box-shadow:0 20px 60px rgba(0,0,0,.35)}
    .hud{display:flex; flex-wrap:wrap; gap:10px}
    .badge{background:#07142b; border:1px solid #1b335a; border-radius:12px; padding:8px 12px; font-weight:800; letter-spacing:.2px}
    .led{font-feature-settings:'tnum' 1; font-variant-numeric:tabular-nums}
    .outs{display:inline-flex; gap:6px; align-items:center}
    .dot{width:10px; height:10px; border-radius:999px; background:#334155; display:inline-block}
    .dot.on{background:#ef4444; box-shadow:0 0 8px #ef4444}
    .equation{font-size:clamp(18px,2.3vw,26px); font-weight:900; color:#facc15; margin:6px 0}
    .diagram{background:linear-gradient(180deg,#0d1a36,#0a1429); border:1px solid #1b2f51; border-radius:14px; height:300px; display:grid; place-items:center}
    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top:8px}
    input,button,select{background:#0c1b36; color:var(--ink); border:1px solid #223a66; border-radius:12px; padding:9px 12px; font-weight:700}
    button{cursor:pointer}
    button:hover{border-color:#2c4e86}
    .feedback{min-height:20px; font-weight:800}
    .steps{background:#0c1b36; border:1px dashed #27446f; border-radius:10px; padding:10px; margin-top:8px}
    .field{position:relative; height:300px; border-radius:14px; background:conic-gradient(from 180deg at 50% 100%, #0b7426, #0c7f28 25%, #0a6c23 25%, #0a6c23 50%, #0b7426 50%, #0b7426 75%, #0a6c23 75%, #0a6c23 100%);
      border:1px solid #174d2c; box-shadow:inset 0 0 0 2px rgba(255,255,255,.05)}
    .diamond{position:absolute; inset:18px;}
    canvas#atbat{position:absolute; inset:0; pointer-events:auto}
    .toast{position:absolute; left:50%; bottom:12px; transform:translateX(-50%); background:#07142b; border:1px solid #1b335a; padding:8px 12px; border-radius:999px; font-weight:800}
    .legend{display:flex; gap:8px; flex-wrap:wrap; margin-top:6px}
    .chip{background:#0c1b36; border:1px solid #223a66; border-radius:999px; padding:4px 8px; font-size:12px}
    .end{display:none; text-align:center}
    .end.show{display:block}
  </style>
</head>
<body>
  <!-- Content trimmed for brevity -->
  <script>
    // In diagram draw functions, arcs removed (no arc highlighting)
    // Example modifications shown for bisector and vertical generators

    function genBis(){
      const totals=[80,100,120,140];
      const total=totals[ri(0,totals.length-1)], half=total/2;
      const a=ri(1,4), c=ri(1,4);
      let x=ri(4,60);
      const b=half - a*x;
      const d=half - c*x;
      const prompt=`BD bisects ∠ABC (m∠ABC=${total}°). m∠ABD = ${a}x ${b>=0?'+':''}${b}°, m∠DBC = ${c}x ${d>=0?'+':''}${d}°. Solve for x.`;
      const steps=`Bisector ⇒ both equal ${half}°. ${a}x ${b>=0?'+':''}${b} = ${half}, ${c}x ${d>=0?'+':''}${d} = ${half} ⇒ x = ${x}.`;
      function draw(){ drawBase(); const A=polar(BX,BY,140,20), C=polar(BX,BY,140,20+total), D=polar(BX,BY,140,20+half);
        drawRayTo(BX,BY,A); drawRayTo(BX,BY,C); drawRayTo(BX,BY,D);
        ui.svg.appendChild(dot(BX,BY)); labelABCD(A,C,D);
        ui.svg.appendChild(labelNear(BX,BY,64,20+(half/2),`${a}x ${b>=0?'+':''}${b}°`));
        ui.svg.appendChild(labelNear(BX,BY,64,20+half+(half/2),`${c}x ${d>=0?'+':''}${d}°`)); }
      return {prompt, steps, x, draw}; }

    function genVertical(){
      const base=ri(10,40); const sep=ri(40,80);
      const t1=base, t1opp=(t1+180)%360;
      const t2=(base+sep)%360, t2opp=(t2+180)%360;
      const A=polar(BX,BY,140,t1), D=polar(BX,BY,140,t1opp), C=polar(BX,BY,140,t2), E=polar(BX,BY,140,t2opp);
      let a=ri(1,4), c=ri(1,4); while(a===c) c=ri(1,4);
      const x=ri(5,70); const b=ri(-10,25); const d=a*x+b-c*x;
      const prompt=`Two lines intersect at B. ∠ABE and ∠CBD are vertical angles. m∠ABE = ${a}x ${b>=0?'+':''}${b}°, m∠CBD = ${c}x ${d>=0?'+':''}${d}°. Solve for x.`;
      const steps=`Vertical angles are congruent ⇒ ${a}x ${b>=0?'+':''}${b} = ${c}x ${d>=0?'+':''}${d} ⇒ x = ${x}.`;
      function draw(){ drawBase();
        drawRayTo(BX,BY,A); drawRayTo(BX,BY,D); drawRayTo(BX,BY,C); drawRayTo(BX,BY,E);
        ui.svg.appendChild(dot(BX,BY)); labelABCDE(A,C,D,E);
        ui.svg.appendChild(labelNear(BX,BY,64,(t1+t2opp)/2,`${a}x ${b>=0?'+':''}${b}°`));
        ui.svg.appendChild(labelNear(BX,BY,64,(t2+t1opp)/2,`${c}x ${d>=0?'+':''}${d}°`)); }
      return {prompt, steps, x, draw}; }
  </script>
</body>
</html>
